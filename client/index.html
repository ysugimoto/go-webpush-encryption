<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>ServiceWorker Testing</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.2.1/css/bulma.min.css" type="text/css">
        <!--<link rel="manifest" href="./pushManifest.json">-->
        <style>
            .page { margin: 20px; }
            .buttons { text-align: center; }
            .buttons .button { width: 100%; }
            .buttons .button:not(:last-child) { margin-bottom: 10px; }
            .send .button { margin-top: 10px; }
            .textarea { min-height: 74px; font-size: 16px; }
            .logs { height: 160px; overflow-y: auto; }
            .logs p { margin-bottom: 2px !important; }
            .ok, .success { color: #20bc56; }
            .ng, .error { color: #ff1f4b; }
            .subscriptions span { font-weight: bold; }
        </style>
    </head>
    <body>
        <div class="page">
            <h1 class="title is-1">WebPush Sample</h1>
            <div class="columns">
                <div class="column is-one-third">
                    <div class="box buttons">
                        <button class="button is-medium is-primary" id="js-ServiceWorker-Register">Boot ServiceWorker</button>
                        <button class="button is-medium is-info is-disabled" id="js-PushSubscribe">Push Subscribe</button>
                        <button class="button is-medium is-info is-disabled" id="js-PushUnsubscribe">Push Unsubscribe</button>
                    </div>
                    <div class="box status">
                        <h2 class="title is-4">Status</h2>
                        <p>ServiceWorker: <span class="ng">Not Ready</span></p>
                        <p>ApplicationServerKey: <span class="ng">Not Ready</span></p>
                        <p>PushPermission: <span class="ng">Not Ready</span></p>
                        <p>PushSubscription: <span class="ng">Not Ready</span></p>
                    </div>
                </div>
                <div class="column">
                    <div class="box subscriptions">
                        <h3 class="title is-4">Subscriptions</h3>
                        <p>Endpoint: <span>-</span></p>
                        <p>p256dh: <span>-</span></p>
                        <p>auth: <span>-</span></p>
                    </div>
                    <div class="box send">
                        <h3 class="title is-4">Push Message</h3>
                        <p class="control">
                            <textarea id="js-PushMessage" class="textarea is-disabled"></textarea>
                            <button id="js-SendPush" class="button is-primary is-disabled" disabled>Send Push</button>
                        </p>
                    </div>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <div class="box">
                        <h3 class="title is-4">Logs</h3>
                        <div id="js-Logs" class="content logs"></div>
                    </div>
                </div>
            </div>
        </div>
        <script src="app.js"></script>
        <script>
            WebPushSample.init({
                server:        location.protocol + "//" + location.host,
                register:      document.getElementById("js-ServiceWorker-Register"),
                subscribe:     document.getElementById("js-PushSubscribe"),
                unsubscribe:   document.getElementById("js-PushUnsubscribe"),
                payload:       document.getElementById("js-PushMessage"),
                send:          document.getElementById("js-SendPush"),
                log:           document.getElementById("js-Logs"),
                subscriptions: document.querySelectorAll(".subscriptions span"),
                states:        document.querySelectorAll(".status span")
            });
        </script>
    </body>
</html>

